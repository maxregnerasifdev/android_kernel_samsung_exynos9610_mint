name: Development Build (Galaxy A50)

on:
  push:
    branches:
      - 'master'
      - 'main'
      - 'wip-*'

jobs:
  oneui-s-e:
    name: Build One UI 5 (Enforcing)
    runs-on: ubuntu-latest

    strategy:
      fail-fast: true
      
    steps:
    - name: Set up Android environment
      uses: android-actions/setup-android@v2
      with:
        sdk-version: '13'
        build-tools-version: '32.0.0'
        target-platform: 'android-33'

    # Update Debian/Ubuntu Repositories, Install dependencies, Build Mint kernel, Prepare release package, Upload release package, and Upload build config artifact steps remain unchanged.

  oneui-s-m:
    name: Build One UI 5 (Enforcing; Magisk Canary)
    runs-on: ubuntu-latest

    strategy:
      fail-fast: true
      
    steps:
    - name: Set up Android environment
      uses: android-actions/setup-android@v2
      with:
        sdk-version: '13'
        build-tools-version: '32.0.0'
        target-platform: 'android-33'

    # Remaining steps similar to oneui-s-e job

  oneui-s-p:
    name: Build One UI 5 (Permissive)
    runs-on: ubuntu-latest

    strategy:
      fail-fast: true
      
    steps:
    - name: Set up Android environment
      uses: android-actions/setup-android@v2
      with:
        sdk-version: '13'
        build-tools-version: '32.0.0'
        target-platform: 'android-33'

    # Remaining steps similar to oneui-s-e job

  # Jobs for other variants (Magisk Canary, AOSP, etc.) follow a similar structure with Android 13 setup.

  release:
    name: Release files and configs
    if: ${{ !contains(github.event.head_commit.message, '[skip rel]') }}
    needs: [oneui-s-m]
    runs-on: ubuntu-latest
    strategy:
      fail-fast: true
    steps:
    - uses: actions/checkout@v2
